---
timestamp: 'Tue Oct 14 2025 01:52:18 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251014_015218.14fdb697.md]]'
content_id: cc393a2046ff1bf96af96878e702cc77f32a454d9b56aef53ed4663f3402759b
---

# Commenting

Every action should have a comment including its signature, its requirements, and effects:

```typescript
  /**
   * createLabel (name: String): (label: Label)
   *
   * **requires** no Label with the given `name` already exists
   *
   * **effects** creates a new Label `l`; sets the name of `l` to `name`; returns `l` as `label`
   */
```

concept Reaction \[Post, User]
purpose allow users to respond to posts with lightweight emoji feedback
principle when a user adds a specific type of emoji reaction to a post, that reaction is recorded and associated with the post and user; subsequently, the user can remove their specific emoji reaction.
state
a set of Reaction with // Using singular 'Reaction' for the entity type
id: UUID            // Add an explicit identifier for each reaction entity
post: Post          // Use the generic Post type parameter
reactionType: EmojiString // New type or constraint implying emoji
reactingUser: User  // Use the generic User type parameter

actions
add(post: Post, reactionType: EmojiString, reactingUser: User) : (reactionId: UUID)
**requires**
// 1. reactionType must be a valid emoji
reactionType IS\_VALID\_EMOJI
// 2. User cannot add the exact same emoji reaction to the same post twice
AND NOT (EXISTS r IN Reaction SUCH THAT r.post == post AND r.reactingUser == reactingUser AND r.reactionType == reactionType)
**effects** create new\_reaction with id = UUID(), post = post, reactionType = reactionType, reactingUser = reactingUser
add new\_reaction to Reaction
returns new\_reaction.id

remove(post: Post, reactionType: EmojiString, reactingUser: User)
**requires** EXISTS r IN Reaction SUCH THAT r.post == post AND r.reactingUser == reactingUser AND r.reactionType == reactionType
**effects** delete r from Reaction WHERE r.post == post AND r.reactingUser == reactingUser AND r.reactionType == reactionType

queries
getReactionsForPost(post: Post) : (reactions: Reaction\[])
**requires** true
**effects** returns the set of all Reaction entities where reaction.post == post

getReactionsByPostAndUser(post: Post, reactingUser: User) : (reactions: Reaction\[])
**requires** true
**effects** returns the set of all Reaction entities where reaction.post == post AND reaction.reactingUser == reactingUser
