---
timestamp: 'Fri Oct 17 2025 17:31:22 GMT-0400 (Eastern Daylight Time)'
parent: '[[..\20251017_173122.7482fbd6.md]]'
content_id: 42cfc2dd7d3a28d4e95322e0f15ed3d512b8b8cb2e7403ec29adc2a888f767a1
---

# Test implementation

While testing, use the `testDb` function, which returns a tuple of the database and client so that you can close it.

```typescript
import { testDb } from "@utils/database.ts";

Deno.test("...", async () => {
  const [db, client] = await testDb();

  // ... tests

  await client.close();
});
```

The database is already automatically dropped before every test file using the `Deno.test.beforeAll` hook: do not include any additional manipulation of the database for this purpose. Do not use t.beforeAll(), t.afterAll(), or t.beforeEach() as they are not supported in the Deno.test framework. All setup and teardown must happen inside the main Deno.test() function or within t.step(...) blocks, not globally or with lifecycle hooks.

Use the Deno.test framework, splitting by appropriate test steps and describing each behavior. Import helpers from:

```typescript
import { assertEquals } from "jsr:@std/assert"; // or any other utility from the library
```
