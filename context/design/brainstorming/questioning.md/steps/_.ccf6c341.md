---
timestamp: 'Thu Oct 30 2025 21:00:42 GMT-0400 (Eastern Daylight Time)'
parent: '[[..\20251030_210042.403fc88c.md]]'
content_id: ccf6c3416bd5bfbe7387f499a423b9e135060b2a9449237385df6bf9d69ca43f
---

# Actions for External Syncing and Data Management

syncCalendar (user: User, externalEvents: set of Events)
effect updates the user's schedule to match their external calendar without affecting manual blocks.

* First, removes all of the user's BusySlots where origin is EXTERNAL.
* Then, for each event in externalEvents, creates a new BusySlot with origin set to EXTERNAL.

deleteAllForUser (user: User)
effect removes all busy slots (both MANUAL and EXTERNAL) for the user. # A full reset

getSlots (user: User): (slots: set of BusySlots)
effect returns all busy slots for the user, regardless of origin
\`

### Rationale for the Changes:

1. **Re-introducing `origin`:** The core problem is distinguishing what the system can automatically manage (from the calendar) versus what the user manages directly. The `origin: (EXTERNAL, MANUAL)` field on each `BusySlot` solves this perfectly.
2. **Smarter `syncCalendar`:** Your original `syncCalendar` action was "destructive and replaces everything." The new version is much safer and more aligned with user expectations. It now specifically targets only the `EXTERNAL` slots for replacement, leaving `MANUAL` ones untouched.
3. **Scoped Actions for Manual Slots:** We now have a full set of actions (`blockTime`, `updateSlot`, `deleteSlot`) for managing manual blocks. The `requires slot.origin is MANUAL` clause is the key safety mechanism that prevents the user from trying to edit an event that actually lives on their Google Calendar.
4. **Clarified Principles:** The `purpose` and `principle` have been updated to reflect this new hybrid nature. It's no longer a *pure* read-only reflection; it's a composite view of availability, which is a much more powerful and flexible concept.
5. **`deleteAllForUser` Retained:** This action still has a purpose as a "full reset" for a user's schedule, which can be a useful administrative function. The comment clarifies that it is a destructive action affecting all data types.
